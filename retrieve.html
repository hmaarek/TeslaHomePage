<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Retrieve Videos</title>
</head>
<body>
  <h1>Saved Videos</h1>
  <nav>
    <a href="save.html">Save Videos</a> | <a href="index.html">Go to Main Page</a>
  </nav>
  <ul id="videoList"></ul>
  <script>
    //original version of fetch function-----------------------------------------
    // fetch('/.netlify/functions/get-submissions')
    //   .then(response => response.json())
    //   .then(data => {
    //     const videoList = document.getElementById('videoList');
    //     data.forEach(submission => {
    //       videoList.innerHTML += `<li><a href='index.html?v=${submission.data.videoUrl}'>${submission.data.videoUrl}</a></li>`;
    //     });
    //   })
    //   .catch(err => console.error('Error fetching submissions:', err));
    //--------------------------------------------------------------------------

    //debug version of fetch by GPT
    fetch('/.netlify/functions/get-submissions')
  .then(response => {
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    return response.json();
  })
  .then(data => {
    //console.log('Response Data:', data); // Log the raw response
    const videoList = document.getElementById('videoList');
    if (Array.isArray(data)) {
      data.forEach(submission => {
        videoList.innerHTML += `<li><a href="index.html?v=${submission.data.videoUrl}">${submission.data.videoUrl}</a></li>`;
      });
    } else {
      videoList.innerHTML = '<li>No submissions found or invalid data format.</li>';
    }
  })
  .catch(err => console.error('Error fetching submissions:', err));

  </script>
</body>
</html>
